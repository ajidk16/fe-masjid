<!doctype html>
<html lang="id" class="scroll-smooth">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Marketplace Halal Jamaah</title>
		<script src="https://cdn.tailwindcss.com"></script>
		<script>
			tailwind.config = {
				darkMode: 'class',
				theme: {
					extend: {
						colors: {
							brand: {
								50: '#ecfdf5',
								100: '#d1fae5',
								200: '#a7f3d0',
								300: '#6ee7b7',
								400: '#34d399',
								500: '#10b981',
								600: '#059669',
								700: '#047857',
								800: '#065f46',
								900: '#064e3b'
							},
							gold: {
								50: '#fefce8',
								100: '#fef9c3',
								200: '#fef08a',
								300: '#fde047',
								400: '#facc15',
								500: '#eab308',
								600: '#ca8a04',
								700: '#a16207',
								800: '#854d0e',
								900: '#713f12'
							}
						},
						boxShadow: { soft: '0 8px 30px rgba(0,0,0,0.06)' }
					}
				}
			};
		</script>
	</head>
	<body class="bg-slate-50 text-slate-800">
		<!-- Top bar -->
		<header class="sticky top-0 z-30 border-b border-slate-200 bg-white/90 backdrop-blur">
			<div class="mx-auto flex h-16 max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8">
				<div class="flex items-center gap-3">
					<div
						class="grid h-10 w-10 place-items-center rounded-xl bg-brand-600 font-bold text-white"
					>
						M
					</div>
					<div>
						<h1 class="text-lg font-semibold">Marketplace Halal Jamaah</h1>
						<p class="text-xs text-slate-500">Terverifikasi takmir. Amanah. Transparan.</p>
					</div>
				</div>
				<nav class="hidden items-center gap-6 md:flex">
					<a href="#" class="text-sm text-slate-600 hover:text-brand-700">Beranda</a>
					<a href="#" class="text-sm text-slate-600 hover:text-brand-700">Donasi</a>
					<a href="#" class="text-sm text-slate-600 hover:text-brand-700">Kajian</a>
					<a href="#" class="text-sm text-slate-600 hover:text-brand-700">Dashboard</a>
				</nav>
				<button
					id="btn-cart"
					class="relative inline-flex items-center gap-2 rounded-xl border border-slate-200 px-3 py-2 text-sm hover:bg-slate-100"
				>
					<svg class="h-5 w-5 text-brand-700" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path
							stroke-width="1.8"
							d="M3 3h2l.4 2M7 13h10l3-7H6.4M7 13L5.4 5M7 13l-2 9m12-9-2 9m-8 0h12"
						/>
					</svg>
					Keranjang
					<span
						id="cart-count"
						class="ml-1 inline-flex h-5 min-w-[20px] items-center justify-center rounded-full bg-gold-500 px-1.5 text-[11px] font-semibold text-white"
						>0</span
					>
				</button>
			</div>
		</header>

		<!-- Hero -->
		<section class="border-b border-slate-200 bg-gradient-to-b from-white to-slate-50">
			<div class="mx-auto grid max-w-7xl gap-8 px-4 py-10 sm:px-6 md:grid-cols-2 lg:px-8">
				<div>
					<h2 class="text-2xl font-semibold text-slate-900 md:text-3xl">
						Belanja produk <span class="text-brand-700">halal</span> dari UMKM jamaah
					</h2>
					<p class="mt-3 text-slate-600">
						Setiap transaksi ikut menguatkan ekonomi masjid. Biaya layanan rendah. Tanpa riba.
						Transparan.
					</p>
					<div class="mt-6 flex flex-wrap gap-3">
						<a
							href="#catalog"
							class="rounded-xl bg-brand-700 px-4 py-2 text-sm text-white hover:bg-brand-800"
							>Lihat Katalog</a
						>
						<button class="rounded-xl border border-slate-300 px-4 py-2 text-sm hover:bg-slate-100">
							Ajukan Toko
						</button>
					</div>
				</div>
				<div class="hidden md:block">
					<div class="rounded-2xl border border-slate-200 bg-white p-4 shadow-soft">
						<div
							class="grid aspect-video place-items-center rounded-xl bg-slate-100 text-slate-500"
						>
							Gambar banner
						</div>
						<div class="mt-4 grid grid-cols-3 gap-3">
							<div class="h-20 rounded-xl bg-slate-100"></div>
							<div class="h-20 rounded-xl bg-slate-100"></div>
							<div class="h-20 rounded-xl bg-slate-100"></div>
						</div>
					</div>
				</div>
			</div>
		</section>

		<!-- Filters -->
		<section class="mx-auto max-w-7xl px-4 py-6 sm:px-6 lg:px-8">
			<div class="grid items-end gap-4 lg:grid-cols-4">
				<div class="lg:col-span-2">
					<label class="mb-1 block text-sm font-medium">Pencarian</label>
					<div class="relative">
						<input
							id="search"
							type="text"
							placeholder="Cari produk halal…"
							class="w-full rounded-xl border border-slate-300 bg-white px-4 py-2.5 pr-10 text-sm outline-none focus:ring-2 focus:ring-brand-600"
						/>
						<svg
							class="pointer-events-none absolute top-2.5 right-3 h-5 w-5 text-slate-400"
							fill="none"
							viewBox="0 0 24 24"
							stroke="currentColor"
						>
							<path stroke-width="1.6" d="m21 21-4.35-4.35M10 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16Z" />
						</svg>
					</div>
				</div>
				<div>
					<label class="mb-1 block text-sm font-medium">Kategori</label>
					<select
						id="category"
						class="w-full rounded-xl border border-slate-300 bg-white px-3 py-2.5 text-sm focus:ring-2 focus:ring-brand-600"
					>
						<option value="all">Semua</option>
						<option value="makanan">Makanan</option>
						<option value="busana">Busana</option>
						<option value="alat-ibadah">Alat Ibadah</option>
						<option value="lainnya">Lainnya</option>
					</select>
				</div>
				<div>
					<label class="mb-1 block text-sm font-medium">Urutkan</label>
					<select
						id="sort"
						class="w-full rounded-xl border border-slate-300 bg-white px-3 py-2.5 text-sm focus:ring-2 focus:ring-brand-600"
					>
						<option value="default">Default</option>
						<option value="price-asc">Harga terendah</option>
						<option value="price-desc">Harga tertinggi</option>
						<option value="name-asc">Nama A-Z</option>
						<option value="name-desc">Nama Z-A</option>
					</select>
				</div>
			</div>
		</section>

		<!-- Catalog -->
		<section id="catalog" class="mx-auto max-w-7xl px-4 pb-16 sm:px-6 lg:px-8">
			<div id="grid" class="grid gap-5 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
				<!-- Template cards injected by JS -->
			</div>
			<!-- Empty state -->
			<div id="empty" class="mt-10 hidden text-center text-slate-500">Produk tidak ditemukan.</div>
		</section>

		<!-- Cart Drawer -->
		<aside
			id="drawer"
			class="fixed top-0 right-0 z-40 h-full w-full max-w-md translate-x-full border-l border-slate-200 bg-white shadow-2xl transition-transform duration-300"
		>
			<div class="flex h-16 items-center justify-between border-b border-slate-200 px-4">
				<h3 class="font-semibold">Keranjang</h3>
				<button id="btn-close" class="rounded-lg p-2 hover:bg-slate-100">
					<svg class="h-5 w-5 text-slate-600" viewBox="0 0 24 24" fill="none" stroke="currentColor">
						<path stroke-width="1.8" d="M6 18 18 6M6 6l12 12" />
					</svg>
				</button>
			</div>
			<div id="cart-list" class="max-h-[calc(100vh-200px)] space-y-3 overflow-y-auto p-4"></div>
			<div class="space-y-3 border-t border-slate-200 p-4">
				<div class="flex items-center justify-between">
					<span class="text-sm text-slate-600">Subtotal</span>
					<span id="subtotal" class="font-semibold">Rp0</span>
				</div>
				<button
					id="btn-checkout"
					class="w-full rounded-xl bg-brand-700 py-3 text-sm font-semibold text-white hover:bg-brand-800"
				>
					Checkout via QRIS Syariah
				</button>
				<p class="text-xs text-slate-500">
					Komisi layanan ≤ 10%. Dana disalurkan ke UMKM dan operasional masjid.
				</p>
			</div>
		</aside>

		<!-- Footer -->
		<footer class="border-t border-slate-200 bg-white">
			<div class="mx-auto max-w-7xl px-4 py-8 text-sm text-slate-600 sm:px-6 lg:px-8">
				<div class="flex flex-col items-start justify-between gap-4 md:flex-row md:items-center">
					<p>© 2025 Ekosistem Digital Masjid. Halal. Transparan.</p>
					<div class="flex items-center gap-4">
						<a href="#" class="hover:text-brand-700">Kebijakan</a>
						<a href="#" class="hover:text-brand-700">Bantuan</a>
						<a href="#" class="hover:text-brand-700">Hubungi Takmir</a>
					</div>
				</div>
			</div>
		</footer>

		<script>
			// ------- Data Produk Contoh -------
			const PRODUCTS = [
				{
					id: 'p1',
					name: 'Kopi Arabika Gayo 200g',
					price: 55000,
					category: 'makanan',
					halal: true,
					img: '',
					seller: 'UMKM Al-Huda'
				},
				{
					id: 'p2',
					name: 'Kurma Ajwa Premium 500g',
					price: 120000,
					category: 'makanan',
					halal: true,
					img: '',
					seller: 'Bait Kurma'
				},
				{
					id: 'p3',
					name: 'Sarung Tenun Hijau',
					price: 90000,
					category: 'busana',
					halal: true,
					img: '',
					seller: 'Toko Sarung Barokah'
				},
				{
					id: 'p4',
					name: 'Mukena Katun Emboss',
					price: 185000,
					category: 'busana',
					halal: true,
					img: '',
					seller: 'UMKM Aisyah'
				},
				{
					id: 'p5',
					name: 'Sajadah Tebal Travel',
					price: 75000,
					category: 'alat-ibadah',
					halal: true,
					img: '',
					seller: 'An-Nur Craft'
				},
				{
					id: 'p6',
					name: 'Minyak Zaitun 250ml',
					price: 48000,
					category: 'makanan',
					halal: true,
					img: '',
					seller: 'Herbal Sunnah'
				},
				{
					id: 'p7',
					name: 'Tasbih Kayu 99 Butir',
					price: 35000,
					category: 'alat-ibadah',
					halal: true,
					img: '',
					seller: 'Al-Barakah'
				},
				{
					id: 'p8',
					name: 'Gamis Pria Lengan Panjang',
					price: 210000,
					category: 'busana',
					halal: true,
					img: '',
					seller: 'UMKM Salman'
				},
				{
					id: 'p9',
					name: 'Madu Hutan 500ml',
					price: 95000,
					category: 'makanan',
					halal: true,
					img: '',
					seller: 'Madu Jamaah'
				},
				{
					id: 'p10',
					name: 'Al-Qur’an Saku',
					price: 65000,
					category: 'alat-ibadah',
					halal: true,
					img: '',
					seller: 'Penerbit An-Nisa'
				}
			];

			// ------- State -------
			let cart = []; // {id, name, price, qty}

			// ------- Utils -------
			const fmt = (n) =>
				new Intl.NumberFormat('id-ID', {
					style: 'currency',
					currency: 'IDR',
					maximumFractionDigits: 0
				}).format(n);

			function makeCard(p) {
				return `
      <article class="group rounded-2xl border border-slate-200 bg-white p-3 hover:shadow-soft transition" data-id="${p.id}" data-name="${p.name}" data-price="${p.price}" data-category="${p.category}">
        <div class="relative">
          <div class="aspect-[4/3] w-full rounded-xl bg-slate-100 grid place-items-center text-slate-400">Foto Produk</div>
          <span class="absolute left-2 top-2 inline-flex items-center gap-1 rounded-full bg-brand-700/95 px-2 py-1 text-[11px] font-semibold text-white">
            <svg class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-width="2" d="M5 13l4 4L19 7"/></svg> Halal verified
          </span>
        </div>
        <div class="mt-3 space-y-1.5">
          <h3 class="text-sm font-semibold line-clamp-2">${p.name}</h3>
          <p class="text-xs text-slate-500">${p.seller}</p>
          <div class="flex items-center justify-between">
            <span class="text-base font-semibold text-brand-800">${fmt(p.price)}</span>
            <button class="btn-add rounded-xl bg-gold-500 text-slate-900 text-sm font-semibold px-3 py-2 hover:bg-gold-400">Tambah</button>
          </div>
        </div>
      </article>`;
			}

			function renderGrid(list) {
				const grid = document.getElementById('grid');
				grid.innerHTML = list.map(makeCard).join('');
				document.getElementById('empty').classList.toggle('hidden', list.length !== 0);
				bindAddButtons();
			}

			function bindAddButtons() {
				document.querySelectorAll('.btn-add').forEach((btn) => {
					btn.addEventListener('click', (e) => {
						const card = e.target.closest('article');
						const id = card.dataset.id;
						const name = card.dataset.name;
						const price = Number(card.dataset.price);
						addToCart({ id, name, price });
						openDrawer();
					});
				});
			}

			function addToCart(item) {
				const ex = cart.find((c) => c.id === item.id);
				if (ex) ex.qty += 1;
				else cart.push({ ...item, qty: 1 });
				syncCartUI();
			}

			function changeQty(id, delta) {
				const it = cart.find((c) => c.id === id);
				if (!it) return;
				it.qty += delta;
				if (it.qty <= 0) cart = cart.filter((c) => c.id !== id);
				syncCartUI();
			}

			function syncCartUI() {
				// count
				const count = cart.reduce((a, b) => a + b.qty, 0);
				document.getElementById('cart-count').textContent = count;

				// subtotal
				const subtotal = cart.reduce((a, b) => a + b.price * b.qty, 0);
				document.getElementById('subtotal').textContent = fmt(subtotal);

				// list
				const wrap = document.getElementById('cart-list');
				if (cart.length === 0) {
					wrap.innerHTML = `<p class="text-sm text-slate-500">Keranjang kosong.</p>`;
					return;
				}
				wrap.innerHTML = cart
					.map(
						(c) => `
        <div class="flex items-center justify-between gap-3 rounded-xl border border-slate-200 p-3">
          <div class="min-w-0">
            <p class="text-sm font-semibold truncate">${c.name}</p>
            <p class="text-xs text-slate-500">${fmt(c.price)}</p>
          </div>
          <div class="flex items-center gap-2">
            <button class="rounded-lg border border-slate-300 px-2 py-1 text-sm" data-act="dec" data-id="${c.id}">-</button>
            <span class="w-6 text-center text-sm">${c.qty}</span>
            <button class="rounded-lg border border-slate-300 px-2 py-1 text-sm" data-act="inc" data-id="${c.id}">+</button>
          </div>
        </div>
      `
					)
					.join('');

				// bind qty buttons
				wrap.querySelectorAll('button[data-act]').forEach((b) => {
					b.onclick = () => changeQty(b.dataset.id, b.dataset.act === 'inc' ? 1 : -1);
				});
			}

			// ------- Drawer -------
			const drawer = document.getElementById('drawer');
			const openDrawer = () => drawer.classList.remove('translate-x-full');
			const closeDrawer = () => drawer.classList.add('translate-x-full');

			document.getElementById('btn-cart').addEventListener('click', openDrawer);
			document.getElementById('btn-close').addEventListener('click', closeDrawer);
			document.getElementById('btn-checkout').addEventListener('click', () => {
				if (cart.length === 0) return alert('Keranjang kosong.');
				alert('Simulasi checkout. Integrasi ke QRIS Syariah atau Midtrans Syariah.');
			});

			// ------- Filters -------
			const q = document.getElementById('search');
			const cat = document.getElementById('category');
			const sort = document.getElementById('sort');

			function applyFilters() {
				let list = PRODUCTS.slice();

				// search
				const term = q.value.trim().toLowerCase();
				if (term)
					list = list.filter(
						(p) => p.name.toLowerCase().includes(term) || p.seller.toLowerCase().includes(term)
					);

				// category
				const c = cat.value;
				if (c !== 'all') list = list.filter((p) => p.category === c);

				// sort
				const s = sort.value;
				if (s === 'price-asc') list.sort((a, b) => a.price - b.price);
				else if (s === 'price-desc') list.sort((a, b) => b.price - a.price);
				else if (s === 'name-asc') list.sort((a, b) => a.name.localeCompare(b.name));
				else if (s === 'name-desc') list.sort((a, b) => b.name.localeCompare(a.name));

				renderGrid(list);
			}

			q.addEventListener('input', applyFilters);
			cat.addEventListener('change', applyFilters);
			sort.addEventListener('change', applyFilters);

			// ------- Init -------
			renderGrid(PRODUCTS);
			syncCartUI();
		</script>
	</body>
</html>
